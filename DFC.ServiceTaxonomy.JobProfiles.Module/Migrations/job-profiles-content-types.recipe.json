{
    "name": "01_job_profiles_content_types",
    "displayName": "Job profiles content types",
    "description": "Creates the required content types to support Job Profiles in STAX",
    "author": "National Careers Service",
    "website": "https://github.com/SkillsFundingAgency/dfc-servicetaxonomy-editor",
    "version": "1.0",
    "issetuprecipe": false,
    "categories": ["default"],
    "tags": ["ncs"],
    "steps": [
        {
            "name": "ContentDefinition",
            "ContentTypes": [
                {
                    "Name": "JobProfile",
                    "DisplayName": "Job Profile",
                    "Settings": {
                        "ContentTypeSettings": {
                            "Creatable": true,
                            "Listable": true,
                            "Draftable": true,
                            "Versionable": true,
                            "Securable": true
                        },
                        "FullTextAspectSettings": {}
                    },
                    "ContentTypePartDefinitionRecords": [
                        {
                            "PartName": "TitlePart",
                            "Name": "TitlePart",
                            "Settings": {
                                "ContentTypePartSettings": {
                                    "Position": "0"
                                }
                            }
                        },
                        {
                            "PartName": "PageLocationPart",
                            "Name": "PageLocationPart",
                            "Settings": {
                                "ContentTypePartSettings": {
                                    "Position": "1"
                                },
                                "PageLocationPartSettings": {
                                    "DisplayRedirectLocationsAndDefaultPageForLocation": false,
                                    "DefaultPageLocationPath": "job-profiles"
                                }
                            }
                        },
                        {
                            "PartName": "JobProfile",
                            "Name": "JobProfile",
                            "Settings": {
                                "ContentTypePartSettings": {
                                    "Position": "2"
                                }
                            }
                        },
                        {
                            "PartName": "GraphSyncPart",
                            "Name": "GraphSyncPart",
                            "Settings": {
                                "ContentTypePartSettings": {
                                    "Position": "3"
                                },
                                "GraphSyncPartSettings": {
                                    "NodeNameTransform": "ContentType",
                                    "IdPropertyName": "uri",
                                    "PropertyNameTransform": "Value",
                                    "GenerateIdPropertyValue": "$\"<<contentapiprefix>>/{ContentType}/{Value}\".ToLowerInvariant()",
                                    "DisplayId": true
                                }
                            }
                        }
                    ]
                },
                {
                    "Name": "SOCCode",
                    "DisplayName": "SOC Code",
                    "Settings": {
                        "ContentTypeSettings": {
                            "Creatable": true,
                            "Listable": true,
                            "Draftable": true,
                            "Versionable": true,
                            "Securable": true
                        }
                    },
                    "ContentTypePartDefinitionRecords": [
                        {
                            "PartName": "TitlePart",
                            "Name": "TitlePart",
                            "Settings": {
                                "ContentTypePartSettings": {
                                    "Position": "0"
                                }
                            }
                        },
                        {
                            "PartName": "SOCCode",
                            "Name": "SOCCode",
                            "Settings": {
                                "ContentTypePartSettings": {
                                    "Position": "1"
                                }
                            }
                        },
                        {
                            "PartName": "GraphSyncPart",
                            "Name": "GraphSyncPart",
                            "Settings": {
                                "ContentTypePartSettings": {
                                    "Position": "2"
                                },
                                "GraphSyncPartSettings": {
                                    "NodeNameTransform": "ContentType",
                                    "IdPropertyName": "uri",
                                    "PropertyNameTransform": "Value",
                                    "GenerateIdPropertyValue": "$\"<<contentapiprefix>>/{ContentType}/{Value}\".ToLowerInvariant()",
                                    "DisplayId": true
                                }
                            }
                        }
                    ]
                },
                {
                    "Name": "SOCSkillsMatrix",
                    "DisplayName": "SOC Skills Matrix",
                    "Settings": {
                        "ContentTypeSettings": {
                            "Listable": true,
                            "Draftable": true,
                            "Versionable": true,
                            "Securable": true
                        },
                        "FullTextAspectSettings": {}
                    },
                    "ContentTypePartDefinitionRecords": [
                        {
                            "PartName": "TitlePart",
                            "Name": "TitlePart",
                            "Settings": {
                                "ContentTypePartSettings": {
                                    "Position": "0"
                                }
                            }
                        },
                        {
                            "PartName": "SOCSkillsMatrix",
                            "Name": "SOCSkillsMatrix",
                            "Settings": {
                                "ContentTypePartSettings": {
                                    "Position": "1"
                                }
                            }
                        },
                        {
                            "PartName": "GraphSyncPart",
                            "Name": "GraphSyncPart",
                            "Settings": {
                                "ContentTypePartSettings": {
                                    "Position": "2"
                                },
                                "GraphSyncPartSettings": {
                                    "NodeNameTransform": "ContentType",
                                    "PropertyNameTransform": "Value",
                                    "IdPropertyName": "uri",
                                    "GenerateIdPropertyValue": "$\"<<contentapiprefix>>/{ContentType}/{Value}\".ToLowerInvariant()",
                                    "DisplayId": true
                                }
                            }
                        }
                    ]
                },
                {
                    "Name": "Skill",
                    "DisplayName": "Skill",
                    "Settings": {
                        "ContentTypeSettings": {
                            "Listable": true,
                            "Draftable": true,
                            "Versionable": true,
                            "Securable": true
                        },
                        "FullTextAspectSettings": {}
                    },
                    "ContentTypePartDefinitionRecords": [
                        {
                            "PartName": "TitlePart",
                            "Name": "TitlePart",
                            "Settings": {
                                "ContentTypePartSettings": {
                                    "Position": "0"
                                }
                            }
                        },
                        {
                            "PartName": "Skill",
                            "Name": "Skill",
                            "Settings": {
                                "ContentTypePartSettings": {
                                    "Position": "1"
                                }
                            }
                        },
                        {
                            "PartName": "GraphSyncPart",
                            "Name": "GraphSyncPart",
                            "Settings": {
                                "ContentTypePartSettings": {
                                    "Position": "2"
                                },
                                "GraphSyncPartSettings": {
                                    "NodeNameTransform": "ContentType",
                                    "PropertyNameTransform": "Value",
                                    "IdPropertyName": "uri",
                                    "GenerateIdPropertyValue": "$\"<<contentapiprefix>>/{ContentType}/{Value}\".ToLowerInvariant()",
                                    "DisplayId": true
                                }
                            }
                        }
                    ]
                }
            ],
            "ContentParts": [
                {
                    "Name": "JobProfile",
                    "Settings": {},
                    "ContentPartFieldDefinitionRecords": [
                        {
                            "FieldName": "TaxonomyField",
                            "Name": "PageLocations",
                            "Settings": {
                                "ContentPartFieldSettings": {
                                    "DisplayName": "Page Locations",
                                    "Position": "0"
                                },
                                "ContentIndexSettings": {},
                                "TaxonomyFieldSettings": {
                                    "Required": true,
                                    "TaxonomyContentItemId": "4eembshqzx66drajtdten34tc8",
                                    "Unique": true
                                },
                                "TaxonomyFieldTagsEditorSettings": {
                                    "Open": false
                                }
                            }
                        },
                        {
                            "FieldName": "ContentPickerField",
                            "Name": "SOCCode",
                            "Settings": {
                                "ContentPartFieldSettings": {
                                    "DisplayName": "SOC Code",
                                    "Position": "4"
                                },
                                "ContentPickerFieldSettings": {
                                    "Hint": "Creates relationships of type [:hasSocCode].",
                                    "Required": true,
                                    "DisplayedContentTypes": [
                                        "SOCCode"
                                    ]
                                },
                                "ContentIndexSettings": {}
                            }
                        },
                        {
                            "FieldName": "ContentPickerField",
                            "Name": "Relatedskills",
                            "Settings": {
                                "ContentPartFieldSettings": {
                                    "DisplayName": "Related skills",
                                    "Position": "5"
                                },
                                "ContentPickerFieldSettings": {
                                    "Hint": "Select and re-order related skills",
                                    "Required": true,
                                    "Multiple": true,
                                    "DisplayedContentTypes": [
                                        "SOCSkillsMatrix"
                                    ]
                                },
                                "ContentIndexSettings": {}
                            }
                        }
                    ]
                },
                {
                    "Name": "SOCCode",
                    "Settings": {},
                    "ContentPartFieldDefinitionRecords": [
                        {
                            "FieldName": "TextField",
                            "Name": "SOCCodeTextField",
                            "Settings": {
                                "ContentPartFieldSettings": {
                                    "Required": true,
                                    "DisplayName": "SOC Code"
                                }
                            }
                        },
                        {
                            "FieldName": "TextField",
                            "Name": "SOCDescriptionTextField",
                            "Settings": {
                                "ContentPartFieldSettings": {
                                    "DisplayName": "Description"
                                }
                            }
                        },
                        {
                            "FieldName": "TextField",
                            "Name": "ONetOccupationCodeTextField",
                            "Settings": {
                                "ContentPartFieldSettings": {
                                    "DisplayName": "ONET Occupation Code"
                                }
                            }
                        }
                    ]
                },
                {
                    "Name": "SOCSkillsMatrix",
                    "Settings": {},
                    "ContentPartFieldDefinitionRecords": [
                        {
                            "FieldName": "TextField",
                            "Name": "ContextualisedDescription",
                            "Settings": {
                                "ContentPartFieldSettings": {
                                    "DisplayName": "Contextualised description",
                                    "Position": "0"
                                }
                            }
                        },
                        {
                            "FieldName": "ContentPickerField",
                            "Name": "LinkedSkill",
                            "Settings": {
                                "ContentPartFieldSettings": {
                                    "DisplayName": "Linked Skill",
                                    "Position": "4"
                                },
                                "ContentPickerFieldSettings": {
                                    "Hint": "Related ONET skill",
                                    "Required": true,
                                    "DisplayedContentTypes": [
                                        "Skill"
                                    ]
                                },
                                "ContentIndexSettings": {}
                            }
                        }
                    ]
                },
                {
                    "Name": "Skill",
                    "Settings": {},
                    "ContentPartFieldDefinitionRecords": [
                        {
                            "FieldName": "TextField",
                            "Name": "Description",
                            "Settings": {
                                "ContentPartFieldSettings": {
                                    "DisplayName": "Description",
                                    "Position": "0"
                                }
                            }
                        },
                        {
                            "FieldName": "TextField",
                            "Name": "OnetSkillID",
                            "Settings": {
                                "ContentPartFieldSettings": {
                                    "DisplayName": "ONET Skill ID",
                                    "Position": "1"
                                }
                            }
                        }

                    ]
                }
            ]
        }
    ]
}
